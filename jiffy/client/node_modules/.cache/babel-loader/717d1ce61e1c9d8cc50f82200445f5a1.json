{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kisus\\\\OneDrive\\\\Documents\\\\GitHub\\\\y2_s2_wd_it_01-itp2022_s2_b01_g04\\\\jiffy\\\\client\\\\src\\\\pages\\\\Account.js\",\n    _s = $RefreshSig$();\n\nimport { React, useState, useEffect } from \"react\";\nimport axios from \"axios\"; // import Header from '../components/HeaderHome';\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Account = _ref => {\n  _s();\n\n  let {\n    history\n  } = _ref;\n  const [error, setError] = useState(\"\");\n  const [privateData, setPrivateData] = useState(\"\");\n  useEffect(() => {\n    if (!localStorage.getItem(\"authToken\")) {\n      history.push(\"/login\");\n    }\n\n    const fetchPrivateData = async () => {\n      const config = {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${localStorage.getItem(\"authToken\")}`\n        }\n      };\n\n      try {\n        const {\n          data\n        } = await axios.get(\"/api/private\", config);\n        setPrivateData(data.data);\n      } catch (error) {\n        localStorage.removeItem(\"authToken\");\n        setError(\"You are not authorized please login\");\n      }\n    };\n\n    fetchPrivateData();\n  }, [history]);\n\n  const logoutHandler = () => {\n    localStorage.removeItem(\"authToken\");\n    history.push(\"/login\");\n  };\n\n  return error ? /*#__PURE__*/_jsxDEV(\"span\", {\n    className: \"error-message\",\n    children: error\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: privateData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: logoutHandler,\n      children: \"Logout\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Account, \"LKgiR0Mkx7vvWCEqb9wbXK/J2yU=\");\n\n_c = Account;\nexport default Account;\n\nvar _c;\n\n$RefreshReg$(_c, \"Account\");","map":{"version":3,"names":["React","useState","useEffect","axios","Account","history","error","setError","privateData","setPrivateData","localStorage","getItem","push","fetchPrivateData","config","headers","Authorization","data","get","removeItem","logoutHandler"],"sources":["C:/Users/kisus/OneDrive/Documents/GitHub/y2_s2_wd_it_01-itp2022_s2_b01_g04/jiffy/client/src/pages/Account.js"],"sourcesContent":["import { React, useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\n\r\n// import Header from '../components/HeaderHome';\r\n\r\nconst Account = ({history}) => {\r\n  const [error, setError] = useState(\"\");\r\n  const [privateData, setPrivateData] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    if(!localStorage.getItem(\"authToken\")){\r\n      history.push(\"/login\")\r\n    }\r\n\r\n    const fetchPrivateData = async () => {\r\n      const config = {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: `Bearer ${localStorage.getItem(\"authToken\")}`,\r\n        },\r\n      };\r\n\r\n      try {\r\n        const { data } = await axios.get(\"/api/private\", config);\r\n        setPrivateData(data.data);\r\n      } catch (error) {\r\n        localStorage.removeItem(\"authToken\");\r\n        setError(\"You are not authorized please login\");\r\n      }\r\n    }\r\n\r\n    fetchPrivateData();\r\n\r\n  }, [history]);\r\n\r\n  const logoutHandler = () => {\r\n    localStorage.removeItem(\"authToken\")\r\n    history.push(\"/login\")\r\n  };\r\n\r\n  return error ? (\r\n    <span className=\"error-message\">{error}</span>\r\n  ) : (\r\n    <>\r\n    <div>{privateData}</div>\r\n    <button onClick={logoutHandler}>Logout</button>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Account;"],"mappings":";;;AAAA,SAASA,KAAT,EAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,KAAP,MAAkB,OAAlB,C,CAEA;;;;;AAEA,MAAMC,OAAO,GAAG,QAAe;EAAA;;EAAA,IAAd;IAACC;EAAD,CAAc;EAC7B,MAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBN,QAAQ,CAAC,EAAD,CAAlC;EACA,MAAM,CAACO,WAAD,EAAcC,cAAd,IAAgCR,QAAQ,CAAC,EAAD,CAA9C;EAEAC,SAAS,CAAC,MAAM;IACd,IAAG,CAACQ,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAJ,EAAsC;MACpCN,OAAO,CAACO,IAAR,CAAa,QAAb;IACD;;IAED,MAAMC,gBAAgB,GAAG,YAAY;MACnC,MAAMC,MAAM,GAAG;QACbC,OAAO,EAAE;UACP,gBAAgB,kBADT;UAEPC,aAAa,EAAG,UAASN,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAkC;QAFpD;MADI,CAAf;;MAOA,IAAI;QACF,MAAM;UAAEM;QAAF,IAAW,MAAMd,KAAK,CAACe,GAAN,CAAU,cAAV,EAA0BJ,MAA1B,CAAvB;QACAL,cAAc,CAACQ,IAAI,CAACA,IAAN,CAAd;MACD,CAHD,CAGE,OAAOX,KAAP,EAAc;QACdI,YAAY,CAACS,UAAb,CAAwB,WAAxB;QACAZ,QAAQ,CAAC,qCAAD,CAAR;MACD;IACF,CAfD;;IAiBAM,gBAAgB;EAEjB,CAxBQ,EAwBN,CAACR,OAAD,CAxBM,CAAT;;EA0BA,MAAMe,aAAa,GAAG,MAAM;IAC1BV,YAAY,CAACS,UAAb,CAAwB,WAAxB;IACAd,OAAO,CAACO,IAAR,CAAa,QAAb;EACD,CAHD;;EAKA,OAAON,KAAK,gBACV;IAAM,SAAS,EAAC,eAAhB;IAAA,UAAiCA;EAAjC;IAAA;IAAA;IAAA;EAAA,QADU,gBAGV;IAAA,wBACA;MAAA,UAAME;IAAN;MAAA;MAAA;MAAA;IAAA,QADA,eAEA;MAAQ,OAAO,EAAEY,aAAjB;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAFA;EAAA,gBAHF;AAQD,CA3CD;;GAAMhB,O;;KAAAA,O;AA6CN,eAAeA,OAAf"},"metadata":{},"sourceType":"module"}